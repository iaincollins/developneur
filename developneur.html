<head>
  <title>developneur</title>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js"></script>
</head>

<body>
    {{> header}}
    <div class="container">
        {{#isolate}} {{renderPage}} {{/isolate}}
    </div>
</body>

<template name="header">
    <div class="navbar navbar-inverse navbar-static-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="/">Project name</a>
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
          </div>
          <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li class="active"><a id="" href="/forums">Forums</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              {{ loginButtons }}
            </ul>
          </div>
        </div>
    </div>
</template>

<template name="home">
    <div class="row">
        <div class="col-sm-12">
          <h2>Hello!</h2>
          {{greeting}}
          <input type="button" value="Click" />
      </div>
  </div>
</template>

<template name='newForum'>
    <div class="row">
        <div class="col-sm-12">
            <h1>New Forum</h1>
            <form action='#'>
                <div class="form-group">
                    <label>Forum name</label>
                    <input id='nameOfForum' class="form-control" type='text' placeholder='Name of Forum' required />
                </div>
                <div class="form-group">
                    <label>Forum description</label>
                    <input id='descriptionOfForum' class="form-control" type='text' placeholder='Description of Forum' />
                </div>
                <input type='submit' class="btn btn-primary pull-right" value='Create new forum' />
            </form>
        </div>
    </div>
</template>

<template name='forums'>
    <div class="row">
        <div class="col-sm-9">
            <h2 class="margin-top-none">Forums</h2>
        </div>
        <div class="col-sm-3">
            {{#if loggedIn}}
            <a href="/new/forum" class="btn btn-primary pull-right">New forum</a>
            {{/if}}
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
          {{#each allForums}}
          <hr/>
          <section class='{{this._id}} interactive'>
            <h3>{{this.name}}</h3>
            <p class="lead">{{this.description}}</p>
          </section>
          {{/each}}
      </div>
  </div>
</template>

<template name='forum'>
    <div class="row">
        <div class="col-sm-9">
            <h2 class="margin-top-none">Forums :: {{currentForum.name}}</h2>
            <p class="lead">{{currentForum.description}}</p>
        </div>
        <div class="col-sm-3">
            {{#if loggedIn}}
	    {{#if isOwnerOfForum}}
	    <span class='btn btn-danger margin-bottom' id='removeForum'>Remove Forum</span>
	    {{/if}}
            {{> newPost}}
            {{/if}}
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">
            <hr/>
            <h2>Posts</h2>
            {{#each currentPosts}}
            <div class="media clearfix">
                <img class="pull-left" src='{{currentUserGrav this}}' />
                <div class="media-body">
                <h3>{{this.title}}</h1>
                <p class="lead">{{this.details}}</p>
                {{#each currentComments this._id}}
                    <section>
                        <div class="media clearfix margin-bottom">
                            <img class="pull-left" height="32" width="32" src='{{currentUserGrav this}}' />
                            <div class="media-body">
                                <h5>{{this.comment}}</h5>
                            </div>
                        </div>
                    </section>
                  {{/each}}
                <h5>ADD A COMMENT</h5>
                  <form action='#'>
                      <textarea type='text' class="form-control margin-bottom" placeholder='Comment' id='newCommentText' data-post-id='{{this._id}}' required></textarea>
                      <input type='submit' class="btn btn-primary pull-right" value='Comment' />
                  </form>
                 </div>
            </div>
            <hr/>
          {{/each}}
        </div>
    </div>
</template>

<template name='newPost'>
  <form action='#'>
    <input id='newPostTitle' class="form-control margin-bottom" type='text' placeholder='Title' required/>
    <input id='newPostDetails'class="form-control margin-bottom" type='text' placeholder='Details' />
    <input type='submit' class="btn btn-primary pull-right" value='Create post' />
  </form>
</template>
